// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
/*
 * Copyright (c) 2022 Zhang Ning <zhangn1985@qq.com>
 */

/dts-v1/;

#include "meson-gxm.dtsi"
#include "meson-gx-p23x-q20x.dtsi"
#include <dt-bindings/input/input.h>

/ {
	compatible = "tmall,magicbox-m16s", "amlogic,s912", "amlogic,meson-gxm";
	model = "MagicBox M16S";

	gpio-keys {
		compatible = "gpio-keys-polled";
		poll-interval = <100>;

		key-power {
			label = "power";
			linux,code = <KEY_POWER>;
			gpios = <&gpio_ao GPIOAO_2 GPIO_ACTIVE_LOW>;
		};
	};

	&sdio_pwrseq {
		reset-gpios = <&gpio GPIODV_2 GPIO_ACTIVE_LOW>;
	};
};

&ethmac {
	phy-mode = "rmii";
	phy-handle = <&internal_phy>;
};

&ir {
	linux,rc-map-name = "rc-magicbox";
};

&sd_emmc_a {
	mwifiex: wifi@1 {
		reg = <1>;
		compatible = "marvell,sd8897";
		interrupt-parent = <&gpio_intc>;
		interrupts = <96 IRQ_TYPE_EDGE_RISING>;
		/* marvell,wakeup-pin = <3>; ??? TBC */
	};

	btmrvl: bt@2 {
		compatible = "marvell,sd8897-bt";
		reg = <2>;
		interrupt-parent = <&gpio_intc>;
		interrupts = <106 IRQ_TYPE_EDGE_RISING>;
		/* marvell,wakeup-pin = /bits/ 16 <0x0d>; ??? (TBC) */
		/* marvell,wakeup-gap-ms = /bits/ 16 <0x64>; ??? (TBC) */
	};
};
